<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax_EX10</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>
<body>
<h1>10. ajax를 사용해서 post 요청 보내기, JSON 값을 서버로 전송, DTO에 저장 후
    [{객체}, {객체}, {객체}] 리턴
</h1>
<h1>ResponseEntity 사용해서 리턴</h1>
<hr>
<br>
<button onclick="exFn()">ajax 요청 함수 호출하기</button>

</body>
<script type="text/javascript">
    const exFn = () => {
        console.log("함수 호출 성공")

        const val1 = 70;
        //자바 스크립트의 객체
        const params = {
            "param1" : val1,
            "param2" : "10 - 반갑습니다",
        }

        $.ajax( {
                //요청 방식: get, post put, patch, delete
                type: "post",
                //요청 주소: http://localhost:9696/ex10
                url: "/ex10",

                //client의 데이터를 서버로 전송
                //JSON.stringify(객체): 직렬화(객체를 JSON 변환)
                data: JSON.stringify(params),

                //서버로 보낼 data
                contentType:"application/json",

                //요청이 성공했을 때 실행, http 상태 코드: 200 ok
                //  res: 서버에서 보내는 값
                //  status: Http 상태 코드를 받을 수 있다.
                success: function (res) {
                    console.log("성공: ", res)
                    console.log("상태 코드: ", res.status)
                    //서버로 받아온 값: res
                    //받아온 값을 가지고 html을 만들어서 랜더링 함
                },

                //요청이 실패 했을 때
                error: function (err) {
                    console.log("실패: ", err)
                }


            }
        )
    }
</script>
</html>